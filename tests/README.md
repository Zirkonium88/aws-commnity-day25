# CDK Stack Testing

This document explains how to run and understand the tests for the CDK stack that creates an encrypted S3 bucket.

## Test Structure

```
tests/
├── __init__.py
└── unit/
    ├── __init__.py
    └── test_cdk_sample_repo_stack.py
```

- `test_cdk_sample_repo_stack.py`: Contains unit tests that verify the CDK stack correctly implements:
  - Server-side encryption using AWS KMS
  - Public access blocking
  - Versioning
  - SSL/TLS enforcement

## Running Tests

To run the unit tests:

```
pytest tests/unit
```

## Test Implementation

The tests use the CDK testing framework to verify that the CloudFormation template generated by the CDK stack contains the expected resources and properties. This ensures that:

1. The S3 bucket is created with the correct encryption settings
2. KMS key is properly configured for server-side encryption
3. Public access is blocked at the bucket level
4. Bucket versioning is enabled
5. SSL/TLS is enforced for all requests

For debugging test failures:
- Use `pytest -v` for more verbose output
- Check that your CDK dependencies are up to date
- Verify that your test fixtures match the current implementation